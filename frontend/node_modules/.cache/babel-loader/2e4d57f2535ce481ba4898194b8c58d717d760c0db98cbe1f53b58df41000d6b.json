{"ast":null,"code":"var _jsxFileName = \"/Users/francescomarinelli/Desktop/University/Thesis/interviews-web-mobile-assignment/frontend/src/App.js\";\nimport './App.css';\nimport Post from './Post.js';\nimport CreatePost from './CreatePost.js';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bundle_size = 15;\nconst url = \"http://localhost:5000/posts\";\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      posts: [],\n      loaded: 0\n    };\n    this.removePostFromState = this.removePostFromState.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n  fetchData() {\n    let url_get = url + '?id_gte=' + Number(this.state.loaded + 1) + '&id_lte=' + Number(this.state.loaded + bundle_size);\n    fetch(url_get).then(resp => resp.json()).then(resp => {\n      console.log(resp);\n      if (resp.length < bundle_size) document.getElementById('load-more').style.display = 'none';\n      if (resp.length && this.state.posts.indexOf(resp[0].id) === -1) {\n        let updatingArray = this.state.posts.concat(resp);\n        this.setState({\n          posts: updatingArray,\n          loaded: this.state.loaded + resp.length\n        });\n      }\n    }).catch(function (err) {\n      console.log('Data retrival error -> ' + err);\n    });\n  }\n  removePostFromState(id) {\n    fetch(url + '/' + id, {\n      method: 'DELETE'\n    }).catch(function (err) {\n      console.log('Removal error -> ' + err);\n      return;\n    });\n    let updatingArray = this.state.posts.slice();\n    let index = updatingArray.findIndex(item => item.id === id);\n    updatingArray.splice(index, 1);\n    this.setState({\n      posts: updatingArray,\n      loaded: updatingArray.length\n    });\n  }\n  handleUpdate(id, title, body, userId) {\n    let index = this.state.posts.findIndex(item => item.id === Number(id));\n    console.log(index);\n\n    //Request to server\n    fetch(url + '/' + id, {\n      method: 'PUT',\n      body: JSON.stringify({\n        id: id,\n        title: title,\n        body: body,\n        userId: userId\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    }).then(response => response.json()).catch(function (err) {\n      console.log('Fetch error -> ' + err);\n      return;\n    });\n\n    //Updating the state with the edited list of posts\n    let newItem = {};\n    newItem.id = id;\n    newItem.title = title;\n    newItem.body = body;\n    newItem.userId = userId;\n    let updatingArray = this.state.posts.slice();\n    updatingArray.splice(index, 1, newItem);\n    this.setState({\n      posts: updatingArray\n    });\n    console.log(this.state.posts);\n    document.getElementById(\"post-\" + id + \"-content\").style.display = 'block';\n    document.getElementById(\"update-post-\" + id + \"-form\").style.display = 'none';\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body\",\n      onScroll: this.fetchData,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Welcome to the Beautiful Collection of Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n        children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n          className: \"create-summary\",\n          children: \"Add a new post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CreatePost, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"List of posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), this.state.posts.map(item => /*#__PURE__*/_jsxDEV(Post, {\n        post: item,\n        delete: this.removePostFromState,\n        edit: this.handleUpdate\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"button\",\n        id: \"load-more\",\n        value: \"Load Posts\",\n        onClick: this.fetchData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["Post","CreatePost","React","bundle_size","url","App","Component","constructor","state","posts","loaded","removePostFromState","bind","handleUpdate","fetchData","url_get","Number","fetch","then","resp","json","console","log","length","document","getElementById","style","display","indexOf","id","updatingArray","concat","setState","catch","err","method","slice","index","findIndex","item","splice","title","body","userId","JSON","stringify","headers","response","newItem","render","map"],"sources":["/Users/francescomarinelli/Desktop/University/Thesis/interviews-web-mobile-assignment/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport Post from './Post.js';\nimport CreatePost from './CreatePost.js';\nimport React from 'react';\n\nconst bundle_size = 15;\nconst url = \"http://localhost:5000/posts\";\n\nclass App extends React.Component {\n  constructor(){\n    super();\n    this.state = {\n      posts: [],\n      loaded: 0\n    };\n\n    this.removePostFromState = this.removePostFromState.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  fetchData() {\n    let url_get = url + '?id_gte=' + Number(this.state.loaded+1) + '&id_lte=' + Number(this.state.loaded+bundle_size);\n    fetch(url_get).then(resp => resp.json()).then(resp => {\n      console.log(resp);\n      if(resp.length < bundle_size)\n      document.getElementById('load-more').style.display = 'none';\n      if(resp.length && this.state.posts.indexOf(resp[0].id)===-1) {\n        let updatingArray = this.state.posts.concat(resp);\n        this.setState({posts: updatingArray, loaded: this.state.loaded+resp.length})\n      }}).catch(function(err) {\n        console.log('Data retrival error -> ' + err);\n      });\n    }\n\n    removePostFromState(id) {\n      fetch(url+'/'+id, {\n        method: 'DELETE',\n      }).catch(function(err) {\n        console.log('Removal error -> ' + err);\n        return;\n      });\n\n      let updatingArray = this.state.posts.slice();\n      let index = updatingArray.findIndex(item => item.id === id);\n      updatingArray.splice(index, 1);\n      this.setState({posts: updatingArray, loaded: updatingArray.length});\n    }\n\n    handleUpdate(id, title, body, userId) {\n      let index = this.state.posts.findIndex(item => item.id === Number(id));\n      console.log(index);\n\n      //Request to server\n      fetch(url+'/'+id, {\n        method: 'PUT',\n        body: JSON.stringify({\n          id: id,\n          title: title,\n          body: body,\n          userId: userId,\n        }),\n        headers: {\n          'Content-type': 'application/json; charset=UTF-8',\n        },\n      })\n      .then((response) => response.json()).catch(function(err) {\n        console.log('Fetch error -> ' + err);\n        return;\n      });\n\n      //Updating the state with the edited list of posts\n      let newItem = {};\n      newItem.id = id;\n      newItem.title = title;\n      newItem.body = body;\n      newItem.userId = userId;\n      let updatingArray = this.state.posts.slice();\n      updatingArray.splice(index, 1, newItem);\n      this.setState({posts: updatingArray});\n\n      console.log(this.state.posts);\n      document.getElementById(\"post-\"+id+\"-content\").style.display = 'block';\n      document.getElementById(\"update-post-\"+id+\"-form\").style.display = 'none'\n    }\n\n    render() {\n\n      return (\n        <div className=\"body\" onScroll={this.fetchData}>\n        <h1>Welcome to the Beautiful Collection of Posts</h1>\n        <details>\n        <summary className='create-summary'>Add a new post</summary>\n        <CreatePost/>\n        </details>\n        <h2>List of posts</h2>\n        {this.state.posts.map((item) => (\n          <Post key={item.id} post={item} delete={this.removePostFromState} edit={this.handleUpdate}/>\n        ))}\n        <input type='button' id='load-more' value='Load Posts' onClick={this.fetchData}/>\n        </div>\n      );\n    }\n  }\n\n  export default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}